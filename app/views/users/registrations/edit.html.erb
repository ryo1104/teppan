<% @page_title = "ログイン情報変更" %>
<% breadcrumb :edit_user_registration, current_user %>
<div class="page-body">
  <div class="row">
    <div class="col s12 m12 content">
      <div class="row content-header">
        <%= render partial: "layouts/breadcrumbs" %>
      </div>
      <h1>メールアドレス・パスワード編集</h1>
      <%= form_with model: @user, url: user_registration_path, method: :patch, :class => 'user-register-edit__form', :local => true do |f| %>
        <div class="user-register-edit__field--error">
          <%= render :partial => "/users/shared/error_messages" %>
        </div>
      
        <div class="user-register-edit__field">
          <%= f.label :email, :class => 'user-register-edit__email-label' %>
          <%= f.email_field :email, autofocus: true, autocomplete: "off", :class => 'user-register-edit__email' %>
        </div>
      
        <% if devise_mapping.confirmable? && resource.pending_reconfirmation? %>
          <div class="user-register-edit__pending-message">お送りしたメールにて承認が未完了です。<%= resource.unconfirmed_email %></div>
        <% end %>
        
        <div class="user-register-edit__field">
          <%= f.label :current_password, :class => 'user-register-edit__password-label' %>
          <%= f.password_field :current_password, autocomplete: "off", :class => 'user-register-edit__password' %>
        </div>
      
        <div class="user-register-edit__field">
          <%= f.label :new_password, :class => 'user-register-edit__password-label' %>
          <% if @minimum_password_length %>
            <span class="user-register-edit__password-message">(<%= @minimum_password_length %> 文字以上)</span>
          <% end %>
          <%= f.password_field :password, autocomplete: "off", :class => 'user-register-edit__password' %>
        </div>
      
        <div class="user-register-edit__field">
          <%= f.label :password_confirmation, :class => 'user-register-edit__password-label' %>
          <%= f.password_field :password_confirmation, autocomplete: "off", :class => 'user-register-edit__password' %>
        </div>
      
        <%= button_tag :type => "submit", :class => "user-register-edit__submit btn waves-effect" do %>
          <i class="user-register-edit__submit material-icons left">refresh</i>更新
        <% end %>
      <% end %>
      <hr>
      <h1>退会</h1>
      <%= link_to user_registration_path(resource_name), {:method => :delete, :class => 'user-register-destroy__submit btn waves-effect', data: { confirm: "本当に退会しますか？" }} do %>
        <i class="user-register-destroy__submit material-icons left">exit_to_app</i>
        <span>退会</span>
      <% end %>
    </div>
  </div>
</div>
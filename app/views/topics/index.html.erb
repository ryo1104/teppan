<% @page_title = "トピック一覧" %>
<% breadcrumb :topics %>
<div class="page-body-container">
  <p><%= breadcrumbs separator: "  &rsaquo;  ", :class => "breadcrumbs custom" %></p>
  <div class="row topic-index">
    <div class="col s12 m12 topics-list">
      <%= render partial: "topics/topic", collection: @topics %>
    </div>
  </div>
  <div class="row topic-index">
    <div><%= paginate(@topics) %></div>
  </div>
  <div class="row topic-index">
    <div class="col s12 m12 topics-ranking z-depth-0">
      <b>トレンド</b><br>
      <% @hashtag_ranking.each do |key, value| %>
        <div class="chip custom"><%= link_to "#"+value[1], "/neta/hashtag/#{value[1]}" %></div>
      <% end %>
      <br>
    </div>
  </div>
  <div class="fixed-action-btn horizontal">
  <!-- Modal Trigger -->
    <a class="btn-floating modal-trigger light-green accent-4" href="#search-modal">
      <i class="material-icons">search</i>
    </a>&nbsp;&nbsp;
    <% if user_signed_in? %>
      <%= link_to new_topic_path, {:class => 'btn-floating light-green accent-4'} do %>
        <i class="material-icons">create</i>
      <% end %>&nbsp;&nbsp;
    <% end %>
  </div>
  <!-- Modal Structure -->
  <div id="search-modal" class="modal">
    <div class="modal-content">
      <h2 class="h2_class">絞り込み検索</h2>
      <%= search_form_for(@search, url: topics_path, html: {method: :get, :class => 'browser-default', role: 'form'}) do |f| %>
        <%= f.label :topic, 'キーワード' %><br>
        <%= f.text_field :title_or_netas_title_or_user_nickname_cont, class: "browser-default" %><br>
        <%= f.label :neta_count, '投稿数' %><br>
        <%= f.number_field :netas_count_gteq, min: 0, step: 1, class: "browser-default" %><br><br>
        <%= button_tag '検索', :type => "submit", class: "btn btn-primary withripple custom" %>
      <% end %>
    </div>
  </div>
</div>